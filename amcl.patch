60,61d59
< #include "collvoid_msgs/PoseArrayWeighted.h"
< 
205c203
<     ros::Publisher particlecloud_pub_, particlecloud_weighted_pub_;
---
>     ros::Publisher particlecloud_pub_;
363,364d360
< 
<   particlecloud_weighted_pub_ = nh_.advertise<collvoid_msgs::PoseArrayWeighted>("particlecloud_weighted", 2, true);
1052,1074d1047
<     pf_sample_set_t* set2 = pf_->sets + pf_->current_set;
<     //   pf_sample_set_t* set2 = pf_->current_set;
< 
<     
<     collvoid_msgs::PoseArrayWeighted cloud_msg2;
<     cloud_msg2.header.stamp = ros::Time::now();
<     cloud_msg2.header.frame_id = global_frame_id_;
<     cloud_msg2.poses.resize(set2->sample_count);
<     cloud_msg2.weights.resize(set2->sample_count);
< 
<     for(int i=0;i<set2->sample_count;i++)
<     {
<       tf::poseTFToMsg(tf::Pose(tf::createQuaternionFromYaw(set2->samples[i].pose.v[2]),
<                                tf::Vector3(set2->samples[i].pose.v[0],
<                                          set2->samples[i].pose.v[1], 0)),
<                       cloud_msg2.poses[i]);
<       
<       cloud_msg2.weights[i] = set2->samples[i].weight;
< 
<     }
<     particlecloud_weighted_pub_.publish(cloud_msg2);
< 
<     
